@page "/SaftyChart"
@using AuthPage.Abstractions
  <Column>
    <PieChart @ref="pieChart" TItem="double" Clicked="@OnClicked" />

</Column>
@code {
    IChartCreator chartCreator = new SaftyChartCreator();

    PieChart<double> pieChart = new PieChart<double>();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await HandleRedraw();
        }
    }
    
    async Task HandleRedraw()
    {
        await pieChart.Clear();

        pieChart = await chartCreator.InitializeChart();
    }

    Task OnClicked(ChartMouseEventArgs e)
    {
        var model = e.Model as BarChartModel;

        //Console.WriteLine($"Handling event for {nameof(BarChartModel)}: x:{model.X} y:{model.Y}");
        return Task.CompletedTask;
    }
}
